
div(style="position:fixed;z-index:100;left:20px;top:20px")
  img(ng-src="${require('../../../img/logo_dark.svg')}", height=50, ng-click="onLogoClick()")


altexo-web-rtc-view(chat='chat', media-state='controls', ng-if='chat.room != null')
  al-video-stream
  video.local.md-whiteframe-2dp(id='localVideo', autoplay='true', muted='true',
    width='320px', height='240px', style='display:none')
  video.remote.md-whiteframe-2dp(id='remoteVideo', autoplay='true',
    width='320px', height='240px', style='display:none')

div(style="position:fixed;z-index:100;left:20px;bottom:410px")
  h5 Chat
  //- label(for='message') Message:&nbsp;
  input(type='text', ng-model='textMessage')
  button(ng-click='sendMessage(textMessage)') Send
  div
    div(ng-repeat='msg in chat.messages track by msg.id')
      strong {{ ::msg.contact.name }}: &nbsp;
      span {{ ::msg.text }}


div(style="position:fixed;z-index:100;left:420px;bottom:110px")
  h5 User
  label(for='nickname') Nickname:&nbsp;
  input(type='text', ng-model='$storage.nickname',
    ng-change='setChatAlias($storage.nickname)')

div(style="position:fixed;z-index:100;left:220px;bottom:110px")
  md-button(class="md-fab md-mini md-primary", aria-label="Turn off video", ng-click="controls.local.video=!controls.local.video")
    md-icon(md-svg-src="${require('../../../img/icons/ic_videocam_black_24px.svg')}", ng-if="controls.local.video")
    md-icon(md-svg-src="${require('../../../img/icons/ic_videocam_off_black_24px.svg')}", ng-if="!controls.local.video")
  md-button(class="md-fab md-mini md-primary", aria-label="Turn off audio", ng-click="controls.local.audio=!controls.local.audio")
    md-icon(md-svg-src="${require('../../../img/icons/ic_mic_black_24px.svg')}", ng-if="controls.local.audio")
    md-icon(md-svg-src="${require('../../../img/icons/ic_mic_off_black_24px.svg')}", ng-if="!controls.local.audio")

div(style="position:fixed;z-index:100;left:20px;bottom:150px", ng-if='chat.room != null')
  h5 Contacts
  ul
    li(ng-repeat='contact in chat.room.contacts track by contact.id')
      | {{ contact.name }}

div(style="position:fixed;z-index:100;left:20px;bottom:20px", ng-if='chat.room != null')
  h5 Room: {{ chat.room.name|uppercase }}
  p Invite by sharing the link: &nbsp;
    span(style="text-decoration: underline;") {{ ::viewLink() }}

  if DEBUG == 'true'
    p Candidates sent: {{ iceSent }}
    p Candidates received: {{ iceReceived }}
